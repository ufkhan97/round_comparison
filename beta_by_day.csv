{"database_id":3,"started_at":"2023-08-28T15:32:28.846597Z","via":[{"status":"failed","class":"class clojure.lang.ExceptionInfo","error":"Error executing query: ERROR: permission denied for schema public\n  Position: 912","stacktrace":["--> driver.sql_jdbc.execute$execute_reducible_query$fn__71855.invoke(execute.clj:505)","driver.sql_jdbc.execute$execute_reducible_query.invokeStatic(execute.clj:502)","driver.sql_jdbc.execute$execute_reducible_query.invoke(execute.clj:489)","driver.sql_jdbc.execute$execute_reducible_query.invokeStatic(execute.clj:497)","driver.sql_jdbc.execute$execute_reducible_query.invoke(execute.clj:489)","driver.sql_jdbc$fn__105207.invokeStatic(sql_jdbc.clj:63)","driver.sql_jdbc$fn__105207.invoke(sql_jdbc.clj:61)","query_processor.context$executef.invokeStatic(context.clj:60)","query_processor.context$executef.invoke(context.clj:49)","query_processor.context.default$default_runf.invokeStatic(default.clj:68)","query_processor.context.default$default_runf.invoke(default.clj:66)","query_processor.context$runf.invokeStatic(context.clj:46)","query_processor.context$runf.invoke(context.clj:40)","query_processor.reducible$identity_qp.invokeStatic(reducible.clj:15)","query_processor.reducible$identity_qp.invoke(reducible.clj:12)","query_processor.middleware.cache$maybe_return_cached_results$maybe_return_cached_results_STAR___69239.invoke(cache.clj:224)","query_processor.middleware.permissions$check_query_permissions$fn__64711.invoke(permissions.clj:126)","query_processor.middleware.mbql_to_native$mbql__GT_native$fn__68130.invoke(mbql_to_native.clj:24)","query_processor$fn__70758$combined_post_process__70763$combined_post_process_STAR___70764.invoke(query_processor.clj:243)","query_processor$fn__70758$combined_pre_process__70759$combined_pre_process_STAR___70760.invoke(query_processor.clj:240)","query_processor.middleware.resolve_database_and_driver$resolve_database_and_driver$fn__69150$fn__69155.invoke(resolve_database_and_driver.clj:36)","driver$do_with_driver.invokeStatic(driver.clj:92)","driver$do_with_driver.invoke(driver.clj:88)","query_processor.middleware.resolve_database_and_driver$resolve_database_and_driver$fn__69150.invoke(resolve_database_and_driver.clj:35)","query_processor.middleware.fetch_source_query$resolve_card_id_source_tables$fn__65021.invoke(fetch_source_query.clj:316)","query_processor.middleware.store$initialize_store$fn__65199$fn__65200.invoke(store.clj:12)","query_processor.store$do_with_store.invokeStatic(store.clj:47)","query_processor.store$do_with_store.invoke(store.clj:41)","query_processor.middleware.store$initialize_store$fn__65199.invoke(store.clj:11)","query_processor.middleware.normalize_query$normalize$fn__69439.invoke(normalize_query.clj:25)","query_processor.middleware.constraints$add_default_userland_constraints$fn__66377.invoke(constraints.clj:54)","query_processor.middleware.process_userland_query$process_userland_query$fn__69375.invoke(process_userland_query.clj:151)","query_processor.middleware.catch_exceptions$catch_exceptions$fn__69752.invoke(catch_exceptions.clj:171)","query_processor.reducible$async_qp$qp_STAR___59520$thunk__59522.invoke(reducible.clj:103)","query_processor.reducible$async_qp$qp_STAR___59520$fn__59524.invoke(reducible.clj:108)"],"error_type":"invalid-query","ex-data":{"driver":"postgres","sql":["-- Metabase:: userID: 3 queryType: native queryHash: a292c2439ac4ebb6d0d509a5d989707852d429c2d23b59d2c538142f95f11a82","SELECT","  \"roundId\" as \"round_id\",","  date_trunc('day', tx_timestamp) as date,","  \"round_name\",","  count(*) as \"votes\",","  sum(\"amountUSD\") as \"amountUSD\"","FROM","  (","    SELECT","      \"public\".\"Vote\".\"id\" AS \"id\",","      \"r\".\"name\" as \"round_name\",","      \"p\".\"project_name\" as \"project_name\",","      \"public\".\"Vote\".\"transaction\" AS \"transaction\",","      \"public\".\"Vote\".\"blockNumber\" AS \"blockNumber\",","      \"public\".\"Vote\".\"projectId\" AS \"projectId\",","      \"public\".\"Vote\".\"roundId\" AS \"roundId\",","      \"public\".\"Vote\".\"voter\" AS \"voter\",","      \"public\".\"Vote\".\"grantAddress\" AS \"grantAddress\",","      \"public\".\"Vote\".\"token\" AS \"token\",","      \"public\".\"Vote\".\"amount\" AS \"amount\",","      \"public\".\"Vote\".\"amountUSD\" AS \"amountUSD\",","      \"public\".\"Vote\".\"amountRoundToken\" AS \"amountRoundToken\",","      TIMESTAMP 'epoch' + (\"public\".\"Vote\".\"tx_timestamp\") * INTERVAL '1 second' as \"tx_timestamp\"","    FROM","      \"public\".\"Vote\"","      INNER JOIN (","        SELECT","          \"public\".\"Round\".\"id\" AS \"id\",","          (","            \"public\".\"Round\".\"metadata\" # >> array [ 'name' ] :: text [ ]","          ) :: text AS \"name\",","          \"public\".\"Round\".\"chainId\" AS \"chainId\",","          \"public\".\"Round\".\"roundId\" AS \"roundId\"","        FROM","          \"public\".\"Round\"","        WHERE","          \"roundEndTime\" = 1683676740","      ) r on r.\"id\" = \"public\".\"Vote\".\"roundId\"","      INNER JOIN (","        SELECT","          \"public\".\"ProjectsInRounds\".\"roundId\" AS \"roundId\",","          \"public\".\"ProjectsInRounds\".\"projectId\" AS \"projectId\",","          \"public\".\"ProjectsInRounds\".\"status\" AS \"status\",","          \"public\".\"ProjectsInRounds\".\"project_name\" AS \"project_name\"","        FROM","          \"public\".\"ProjectsInRounds\"","      ) p on p.\"roundId\" = \"public\".\"Vote\".\"roundId\"","      AND p.\"projectId\" = \"public\".\"Vote\".\"projectId\"","      AND p.\"status\" = 'APPROVED'","  ) b","group by","  \"roundId\",","  \"date\",","  \"round_name\""],"params":null,"type":"invalid-query"}}],"state":"42501","error_type":"invalid-query","json_query":{"type":"native","native":{"query":"SELECT \"roundId\" as \"round_id\",date_trunc('day', tx_timestamp) as date, \"round_name\",\n count(*) as \"votes\", sum(\"amountUSD\") as \"amountUSD\" FROM\n(SELECT \"public\".\"Vote\".\"id\" AS \"id\", \n\"r\".\"name\" as \"round_name\",\n\"p\".\"project_name\" as \"project_name\",\n\"public\".\"Vote\".\"transaction\" AS \"transaction\", \n\"public\".\"Vote\".\"blockNumber\" AS \"blockNumber\",\n\"public\".\"Vote\".\"projectId\" AS \"projectId\", \n\"public\".\"Vote\".\"roundId\" AS \"roundId\",\n\"public\".\"Vote\".\"voter\" AS \"voter\",\n\"public\".\"Vote\".\"grantAddress\" AS \"grantAddress\", \n\"public\".\"Vote\".\"token\" AS \"token\",\n\"public\".\"Vote\".\"amount\" AS \"amount\",\n\"public\".\"Vote\".\"amountUSD\" AS \"amountUSD\",\n\"public\".\"Vote\".\"amountRoundToken\" AS \"amountRoundToken\",\nTIMESTAMP 'epoch' + (\"public\".\"Vote\".\"tx_timestamp\") * INTERVAL '1 second' as \"tx_timestamp\"\nFROM \"public\".\"Vote\" \nINNER JOIN ( \nSELECT \"public\".\"Round\".\"id\" AS \"id\", (\"public\".\"Round\".\"metadata\"#>> array['name']::text[])::text AS \"name\", \n\"public\".\"Round\".\"chainId\" AS \"chainId\", \"public\".\"Round\".\"roundId\" AS \"roundId\"\nFROM \"public\".\"Round\"\nWHERE \"roundEndTime\" = 1683676740\n) r on r.\"id\" = \"public\".\"Vote\".\"roundId\"\nINNER JOIN (\nSELECT \"public\".\"ProjectsInRounds\".\"roundId\" AS \"roundId\", \n\"public\".\"ProjectsInRounds\".\"projectId\" AS \"projectId\", \n\"public\".\"ProjectsInRounds\".\"status\" AS \"status\", \n\"public\".\"ProjectsInRounds\".\"project_name\" AS \"project_name\"\nFROM \"public\".\"ProjectsInRounds\"\n) p on p.\"roundId\" = \"public\".\"Vote\".\"roundId\" AND p.\"projectId\" = \"public\".\"Vote\".\"projectId\" AND p.\"status\" = 'APPROVED') b group by \"roundId\", \"date\", \"round_name\"\n\n\n","template-tags":{},"collection":"Vote"},"database":3,"middleware":{"process-viz-settings?":true,"skip-results-metadata?":true,"format-rows?":false},"async?":true,"viz-settings":{"table.pivot":false,"table.pivot_column":"round_name","table.cell_column":"id","table.column_formatting":[],"metabase.shared.models.visualization-settings/column-settings":{},"metabase.shared.models.visualization-settings/table-columns":[{"metabase.shared.models.visualization-settings/table-column-name":"round_id","metabase.shared.models.visualization-settings/table-column-field-ref":["field","round_id",{"base-type":"type/Integer"}],"metabase.shared.models.visualization-settings/table-column-enabled":true},{"metabase.shared.models.visualization-settings/table-column-name":"date","metabase.shared.models.visualization-settings/table-column-field-ref":["field","date",{"base-type":"type/DateTime"}],"metabase.shared.models.visualization-settings/table-column-enabled":true},{"metabase.shared.models.visualization-settings/table-column-name":"round_name","metabase.shared.models.visualization-settings/table-column-field-ref":["field","round_name",{"base-type":"type/Text"}],"metabase.shared.models.visualization-settings/table-column-enabled":true},{"metabase.shared.models.visualization-settings/table-column-name":"votes","metabase.shared.models.visualization-settings/table-column-field-ref":["field","votes",{"base-type":"type/BigInteger"}],"metabase.shared.models.visualization-settings/table-column-enabled":true},{"metabase.shared.models.visualization-settings/table-column-name":"amountUSD","metabase.shared.models.visualization-settings/table-column-field-ref":["field","amountUSD",{"base-type":"type/Float"}],"metabase.shared.models.visualization-settings/table-column-enabled":true}]}},"status":"failed","class":"class org.postgresql.util.PSQLException","stacktrace":["org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)","org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)","org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)","org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496)","org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413)","org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333)","org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319)","org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295)","org.postgresql.jdbc.PgStatement.execute(PgStatement.java:290)","com.mchange.v2.c3p0.impl.NewProxyStatement.execute(NewProxyStatement.java:75)","--> driver.sql_jdbc.execute$fn__71780.invokeStatic(execute.clj:384)","driver.sql_jdbc.execute$fn__71780.invoke(execute.clj:382)","driver.sql_jdbc.execute$execute_statement_or_prepared_statement_BANG_.invokeStatic(execute.clj:392)","driver.sql_jdbc.execute$execute_statement_or_prepared_statement_BANG_.invoke(execute.clj:389)","driver.sql_jdbc.execute$execute_reducible_query$fn__71855.invoke(execute.clj:503)","driver.sql_jdbc.execute$execute_reducible_query.invokeStatic(execute.clj:502)","driver.sql_jdbc.execute$execute_reducible_query.invoke(execute.clj:489)","driver.sql_jdbc.execute$execute_reducible_query.invokeStatic(execute.clj:497)","driver.sql_jdbc.execute$execute_reducible_query.invoke(execute.clj:489)","driver.sql_jdbc$fn__105207.invokeStatic(sql_jdbc.clj:63)","driver.sql_jdbc$fn__105207.invoke(sql_jdbc.clj:61)","query_processor.context$executef.invokeStatic(context.clj:60)","query_processor.context$executef.invoke(context.clj:49)","query_processor.context.default$default_runf.invokeStatic(default.clj:68)","query_processor.context.default$default_runf.invoke(default.clj:66)","query_processor.context$runf.invokeStatic(context.clj:46)","query_processor.context$runf.invoke(context.clj:40)","query_processor.reducible$identity_qp.invokeStatic(reducible.clj:15)","query_processor.reducible$identity_qp.invoke(reducible.clj:12)","query_processor.middleware.cache$maybe_return_cached_results$maybe_return_cached_results_STAR___69239.invoke(cache.clj:224)","query_processor.middleware.permissions$check_query_permissions$fn__64711.invoke(permissions.clj:126)","query_processor.middleware.mbql_to_native$mbql__GT_native$fn__68130.invoke(mbql_to_native.clj:24)","query_processor$fn__70758$combined_post_process__70763$combined_post_process_STAR___70764.invoke(query_processor.clj:243)","query_processor$fn__70758$combined_pre_process__70759$combined_pre_process_STAR___70760.invoke(query_processor.clj:240)","query_processor.middleware.resolve_database_and_driver$resolve_database_and_driver$fn__69150$fn__69155.invoke(resolve_database_and_driver.clj:36)","driver$do_with_driver.invokeStatic(driver.clj:92)","driver$do_with_driver.invoke(driver.clj:88)","query_processor.middleware.resolve_database_and_driver$resolve_database_and_driver$fn__69150.invoke(resolve_database_and_driver.clj:35)","query_processor.middleware.fetch_source_query$resolve_card_id_source_tables$fn__65021.invoke(fetch_source_query.clj:316)","query_processor.middleware.store$initialize_store$fn__65199$fn__65200.invoke(store.clj:12)","query_processor.store$do_with_store.invokeStatic(store.clj:47)","query_processor.store$do_with_store.invoke(store.clj:41)","query_processor.middleware.store$initialize_store$fn__65199.invoke(store.clj:11)","query_processor.middleware.normalize_query$normalize$fn__69439.invoke(normalize_query.clj:25)","query_processor.middleware.constraints$add_default_userland_constraints$fn__66377.invoke(constraints.clj:54)","query_processor.middleware.process_userland_query$process_userland_query$fn__69375.invoke(process_userland_query.clj:151)","query_processor.middleware.catch_exceptions$catch_exceptions$fn__69752.invoke(catch_exceptions.clj:171)","query_processor.reducible$async_qp$qp_STAR___59520$thunk__59522.invoke(reducible.clj:103)","query_processor.reducible$async_qp$qp_STAR___59520$fn__59524.invoke(reducible.clj:108)"],"card_id":null,"context":"csv-download","error":"ERROR: permission denied for schema public\n  Position: 912","row_count":0,"running_time":0,"data":{"rows":[],"cols":[]}}